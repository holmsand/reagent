<!doctype html>
<html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><base href="../"/><link href="css/built.css?1462189147629" rel="stylesheet"/><title>Reagent: News in 0.6.0-alpha</title></head><body><div id="main-content"><div><div data-reactroot="" data-reactid="1" data-react-checksum="-496467803"><div class="nav" data-reactid="2"><ul class="nav" data-reactid="3"><li class="brand" data-reactid="4"><a href="index.html" data-reactid="5">Reagent:</a></li><li data-reactid="6"><a href="index.html" data-reactid="7">Intro</a></li><li data-reactid="8"><a href="news/index.html" data-reactid="9">News</a></li><li data-reactid="10"><a href="https://github.com/reagent-project/reagent" data-reactid="11">GitHub</a></li></ul></div><div data-reactid="12"></div><div class="reagent-demo" data-reactid="13"><h1 data-reactid="14"><a href="news/news060-alpha.html" data-reactid="15">News in 0.6.0-alpha</a></h1><div class="demo-text" data-reactid="16"><p data-reactid="17"><!-- react-text: 18 -->Reagent 0.6.0-alpha contains new reactivity helpers, better
    integration with native React components, a new version of
    React (0.14.3), new React dependencies (<!-- /react-text --><code data-reactid="19">react-dom</code><!-- react-text: 20 -->
    and <!-- /react-text --><code data-reactid="21">react-dom-server</code><!-- react-text: 22 -->), better performance, and much
    more. <!-- /react-text --></p><p data-reactid="23">This is a quite big release, so it probably contains a fair
    amount of bugs as well…</p><div class="demo-text" data-reactid="24"><section class="demo-text" data-reactid="25"><h2 data-reactid="26">Breaking changes</h2><ul data-reactid="27"><li data-reactid="28"><!-- react-text: 29 -->Reagent now depends on <!-- /react-text --><code data-reactid="30">cljsjs/react-dom</code><!-- react-text: 31 -->
         and <!-- /react-text --><code data-reactid="32">cljsjs/react-dom-server</code><!-- react-text: 33 --> (see below).<!-- /react-text --></li><li data-reactid="34"><!-- react-text: 35 -->The javascript interop macros <!-- /react-text --><code data-reactid="36">.&#x27;</code><!-- react-text: 37 -->
         and <!-- /react-text --><code data-reactid="38">.!</code><!-- react-text: 39 -->, in the <!-- /react-text --><code data-reactid="40">reagent.interop</code><!-- react-text: 41 -->
         namespace are now called <!-- /react-text --><code data-reactid="42">$</code><!-- react-text: 43 --> and <!-- /react-text --><code data-reactid="44">$!</code><!-- react-text: 45 -->
         respectively (the old names clashed with bootstrapped
         ClojureScript).<!-- /react-text --></li><li data-reactid="46"><!-- react-text: 47 -->Reactions, i.e <!-- /react-text --><code data-reactid="48">cursor</code><!-- react-text: 49 --> called with a
         function, <!-- /react-text --><code data-reactid="50">reagent.ratom/reaction</code><!-- react-text: 51 -->, <!-- /react-text --><code data-reactid="52">reagent.ratom/run!</code><!-- react-text: 53 -->
         and <!-- /react-text --><code data-reactid="54">reagent.ratom/make-reaction</code><!-- react-text: 55 --> are now lazy and
         executed asynchronously. Previously, reactions used to
         execute immediately whenever the atoms they depended on
         changed. This could cause performance issues in code with
         expensive reactions and frequent updates to state. However,
         this change may break existing code that depends on the
         timing of side-effects from running
         reactions. <!-- /react-text --><code data-reactid="56">flush</code><!-- react-text: 57 --> can be used to force outstanding
         reactions to run at a given time.<!-- /react-text --></li><li data-reactid="58"><!-- react-text: 59 -->Reactions now only trigger updates of dependent
         components and other reactions if they produce a new result,
         compared with <!-- /react-text --><code data-reactid="60">=</code><!-- react-text: 61 -->.
         Previously, <!-- /react-text --><code data-reactid="62">identical?</code><!-- react-text: 63 --> was used.<!-- /react-text --></li><li data-reactid="64"><code data-reactid="65">next-tick</code><!-- react-text: 66 --> is now guaranteed to execute its
         argument before the next render (more on that below.)<!-- /react-text --></li></ul></section><h2 data-reactid="67">track: Use any function as a reactive value</h2><p data-reactid="68"><code data-reactid="69">reagent.core/track</code><!-- react-text: 70 --> takes a function, and
       optional arguments for that function, and gives a
       derefable (i.e ”atom-like”) value, containing whatever is
       returned by that function. If the tracked function depends on a
       Reagent atom, it is called again whenever that atom changes –
       just like a Reagent component function. If the value returned
       by <!-- /react-text --><code data-reactid="71">track</code><!-- react-text: 72 --> is used in a component, the component is
       re-rendered when the value returned by the function changes. <!-- /react-text --></p><p data-reactid="73"><!-- react-text: 74 -->In other words, <!-- /react-text --><code data-reactid="75">@(r/track foo x)</code><!-- react-text: 76 --> gives the
       same result as <!-- /react-text --><code data-reactid="77">(foo x)</code><!-- react-text: 78 --> – but in the first case,
       foo is only called again when the atom(s) it depends on
       changes.<!-- /react-text --></p><p data-reactid="79">Here&#x27;s an example: </p><div data-reactid="80"><div class="demo-example clearfix" data-reactid="81"><a class="demo-example-hide" data-reactid="82">hide</a><h3 class="demo-heading" data-reactid="83">Example </h3><div class="simple-demo" data-reactid="84"><ul data-reactid="85"><li data-reactid="86">John Smith</li><li data-reactid="87">Maggie Johnson</li></ul></div></div><div class="demo-source clearfix" data-reactid="88"><h3 class="demo-heading" data-reactid="89">Source</h3><pre data-reactid="90"><pre data-reactid="91"><span style="color:#272;" data-reactid="92">(</span><span style="color:#687868;font-weight:bold;" data-reactid="93">ns</span><!-- react-text: 94 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="95">example.core</span><!-- react-text: 96 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="97">(</span><span style="color:blue;" data-reactid="98">:require</span><!-- react-text: 99 --> <!-- /react-text --><span style="color:#44a;" data-reactid="100">[</span><!-- react-text: 101 -->reagent.core <!-- /react-text --><span style="color:blue;" data-reactid="102">:as</span><!-- react-text: 103 --> r<!-- /react-text --><span style="color:#44a;" data-reactid="104">]</span><span style="color:#940;" data-reactid="105">)</span><span style="color:#272;" data-reactid="106">)</span></pre><pre data-reactid="107"><span style="color:#272;" data-reactid="108">(</span><span style="color:#687868;font-weight:bold;" data-reactid="109">defonce</span><!-- react-text: 110 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="111">app-state</span><!-- react-text: 112 --> <!-- /react-text --><span style="color:#940;" data-reactid="113">(</span><span style="color:#687868;font-weight:bold;" data-reactid="114">r/atom</span><!-- react-text: 115 --> <!-- /react-text --><span style="color:#44a;" data-reactid="116">{</span><span style="color:blue;" data-reactid="117">:people</span><!-- react-text: 118 -->
                            <!-- /react-text --><span style="color:#272;" data-reactid="119">{</span><!-- react-text: 120 -->1 <!-- /react-text --><span style="color:#940;" data-reactid="121">{</span><span style="color:blue;" data-reactid="122">:name</span><!-- react-text: 123 --> <!-- /react-text --><span style="color:green;" data-reactid="124">&quot;John Smith&quot;</span><span style="color:#940;" data-reactid="125">}</span><!-- react-text: 126 -->
                             2 <!-- /react-text --><span style="color:#940;" data-reactid="127">{</span><span style="color:blue;" data-reactid="128">:name</span><!-- react-text: 129 --> <!-- /react-text --><span style="color:green;" data-reactid="130">&quot;Maggie Johnson&quot;</span><span style="color:#940;" data-reactid="131">}</span><span style="color:#272;" data-reactid="132">}</span><span style="color:#44a;" data-reactid="133">}</span><span style="color:#940;" data-reactid="134">)</span><span style="color:#272;" data-reactid="135">)</span><!-- react-text: 136 -->

<!-- /react-text --><span style="color:#272;" data-reactid="137">(</span><span style="color:#687868;font-weight:bold;" data-reactid="138">defn</span><!-- react-text: 139 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="140">people</span><!-- react-text: 141 --> <!-- /react-text --><span style="color:#940;" data-reactid="142">[</span><span style="color:#940;" data-reactid="143">]</span><!-- react-text: 144 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="145">(</span><span style="color:blue;" data-reactid="146">:people</span><!-- react-text: 147 --> @app-state<!-- /react-text --><span style="color:#940;" data-reactid="148">)</span><span style="color:#272;" data-reactid="149">)</span><!-- react-text: 150 -->

<!-- /react-text --><span style="color:#272;" data-reactid="151">(</span><span style="color:#687868;font-weight:bold;" data-reactid="152">defn</span><!-- react-text: 153 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="154">person-keys</span><!-- react-text: 155 --> <!-- /react-text --><span style="color:#940;" data-reactid="156">[</span><span style="color:#940;" data-reactid="157">]</span><!-- react-text: 158 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="159">(</span><span style="color:#687868;font-weight:bold;" data-reactid="160">-&gt;</span><!-- react-text: 161 --> @<!-- /react-text --><span style="color:#44a;" data-reactid="162">(</span><span style="color:#687868;font-weight:bold;" data-reactid="163">r/track</span><!-- react-text: 164 --> people<!-- /react-text --><span style="color:#44a;" data-reactid="165">)</span><!-- react-text: 166 -->
      keys
      sort<!-- /react-text --><span style="color:#940;" data-reactid="167">)</span><span style="color:#272;" data-reactid="168">)</span><!-- react-text: 169 -->

<!-- /react-text --><span style="color:#272;" data-reactid="170">(</span><span style="color:#687868;font-weight:bold;" data-reactid="171">defn</span><!-- react-text: 172 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="173">person</span><!-- react-text: 174 --> <!-- /react-text --><span style="color:#940;" data-reactid="175">[</span><!-- react-text: 176 -->id<!-- /react-text --><span style="color:#940;" data-reactid="177">]</span><!-- react-text: 178 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="179">(</span><span style="color:#687868;font-weight:bold;" data-reactid="180">-&gt;</span><!-- react-text: 181 --> @<!-- /react-text --><span style="color:#44a;" data-reactid="182">(</span><span style="color:#687868;font-weight:bold;" data-reactid="183">r/track</span><!-- react-text: 184 --> people<!-- /react-text --><span style="color:#44a;" data-reactid="185">)</span><!-- react-text: 186 -->
      <!-- /react-text --><span style="color:#44a;" data-reactid="187">(</span><!-- react-text: 188 -->get id<!-- /react-text --><span style="color:#44a;" data-reactid="189">)</span><span style="color:#940;" data-reactid="190">)</span><span style="color:#272;" data-reactid="191">)</span><!-- react-text: 192 -->

<!-- /react-text --><span style="color:#272;" data-reactid="193">(</span><span style="color:#687868;font-weight:bold;" data-reactid="194">defn</span><!-- react-text: 195 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="196">name-comp</span><!-- react-text: 197 --> <!-- /react-text --><span style="color:#940;" data-reactid="198">[</span><!-- react-text: 199 -->id<!-- /react-text --><span style="color:#940;" data-reactid="200">]</span><!-- react-text: 201 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="202">(</span><span style="color:#687868;font-weight:bold;" data-reactid="203">let</span><!-- react-text: 204 --> <!-- /react-text --><span style="color:#44a;" data-reactid="205">[</span><!-- react-text: 206 -->p @<!-- /react-text --><span style="color:#272;" data-reactid="207">(</span><span style="color:#687868;font-weight:bold;" data-reactid="208">r/track</span><!-- react-text: 209 --> person id<!-- /react-text --><span style="color:#272;" data-reactid="210">)</span><span style="color:#44a;" data-reactid="211">]</span><!-- react-text: 212 -->
    <!-- /react-text --><span style="color:#44a;" data-reactid="213">[</span><span style="color:blue;" data-reactid="214">:li</span><!-- react-text: 215 -->
     <!-- /react-text --><span style="color:#272;" data-reactid="216">(</span><span style="color:blue;" data-reactid="217">:name</span><!-- react-text: 218 --> p<!-- /react-text --><span style="color:#272;" data-reactid="219">)</span><span style="color:#44a;" data-reactid="220">]</span><span style="color:#940;" data-reactid="221">)</span><span style="color:#272;" data-reactid="222">)</span><!-- react-text: 223 -->

<!-- /react-text --><span style="color:#272;" data-reactid="224">(</span><span style="color:#687868;font-weight:bold;" data-reactid="225">defn</span><!-- react-text: 226 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="227">name-list</span><!-- react-text: 228 --> <!-- /react-text --><span style="color:#940;" data-reactid="229">[</span><span style="color:#940;" data-reactid="230">]</span><!-- react-text: 231 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="232">(</span><span style="color:#687868;font-weight:bold;" data-reactid="233">let</span><!-- react-text: 234 --> <!-- /react-text --><span style="color:#44a;" data-reactid="235">[</span><!-- react-text: 236 -->ids @<!-- /react-text --><span style="color:#272;" data-reactid="237">(</span><span style="color:#687868;font-weight:bold;" data-reactid="238">r/track</span><!-- react-text: 239 --> person-keys<!-- /react-text --><span style="color:#272;" data-reactid="240">)</span><span style="color:#44a;" data-reactid="241">]</span><!-- react-text: 242 -->
    <!-- /react-text --><span style="color:#44a;" data-reactid="243">[</span><span style="color:blue;" data-reactid="244">:ul</span><!-- react-text: 245 -->
     <!-- /react-text --><span style="color:#272;" data-reactid="246">(</span><span style="color:#687868;font-weight:bold;" data-reactid="247">for</span><!-- react-text: 248 --> <!-- /react-text --><span style="color:#940;" data-reactid="249">[</span><!-- react-text: 250 -->i ids<!-- /react-text --><span style="color:#940;" data-reactid="251">]</span><!-- react-text: 252 -->
       ^<!-- /react-text --><span style="color:#940;" data-reactid="253">{</span><span style="color:blue;" data-reactid="254">:key</span><!-- react-text: 255 --> i<!-- /react-text --><span style="color:#940;" data-reactid="256">}</span><!-- react-text: 257 --> <!-- /react-text --><span style="color:#940;" data-reactid="258">[</span><!-- react-text: 259 -->name-comp i<!-- /react-text --><span style="color:#940;" data-reactid="260">]</span><span style="color:#272;" data-reactid="261">)</span><span style="color:#44a;" data-reactid="262">]</span><span style="color:#940;" data-reactid="263">)</span><span style="color:#272;" data-reactid="264">)</span></pre></pre></div></div><p data-reactid="265"><!-- react-text: 266 -->Here, the <!-- /react-text --><code data-reactid="267">name-list</code><!-- react-text: 268 --> component will only be
       re-rendered if the keys of the <!-- /react-text --><code data-reactid="269">:people</code><!-- react-text: 270 --> map
       changes. Every <!-- /react-text --><code data-reactid="271">name-comp</code><!-- react-text: 272 --> only renders again when
       needed, etc.<!-- /react-text --></p><p data-reactid="273"><!-- react-text: 274 -->Use of <!-- /react-text --><code data-reactid="275">track</code><!-- react-text: 276 --> can improve performance in
       three ways:<!-- /react-text --></p><ul data-reactid="277"><li data-reactid="278">It can be used as a cache for an expensive function,
        that is automatically updated if that function depends on Reagent
        atoms (or other tracks, cursors, etc).</li><li data-reactid="279"><!-- react-text: 280 -->It can also be used to limit the number of times a
        component is re-rendered. The user of <!-- /react-text --><code data-reactid="281">track</code><!-- react-text: 282 --> is
        only updated when the function’s result changes. In other
        words, you can use track as a kind of generalized, read-only
        cursor.<!-- /react-text --></li><li data-reactid="283"><!-- react-text: 284 -->Every use of <!-- /react-text --><code data-reactid="285">track</code><!-- react-text: 286 --> with the same arguments
        will only result in one execution of the function. E.g the two
        uses of <!-- /react-text --><code data-reactid="287">@(r/track people)</code><!-- react-text: 288 --> in the example above
        will only result in one call to the <!-- /react-text --><code data-reactid="289">people</code><!-- react-text: 290 -->
        function (both initially, and when the state atom changes).<!-- /react-text --></li></ul><p data-reactid="291"><!-- react-text: 292 -->If you&#x27;ve been using <!-- /react-text --><code data-reactid="293">reagent.ratom/reaction</code><!-- react-text: 294 -->
       etc, <!-- /react-text --><code data-reactid="295">track</code><!-- react-text: 296 --> should be quite familiar. The main
       difference is that <!-- /react-text --><code data-reactid="297">track</code><!-- react-text: 298 --> uses named functions and
       variables, rather than depending on closures, and that you
       don’t have to manage their creation manually (since tracks are
       automatically cached and reused).<!-- /react-text --></p><p data-reactid="299"><b data-reactid="300">Note: </b><!-- react-text: 301 -->The first argument to <!-- /react-text --><code data-reactid="302">track</code><!-- react-text: 303 -->
       should be a named function, i.e not an anonymous one. Also,
       beware of lazy data sequences: don’t use deref (i.e ”@”) with
       the <!-- /react-text --><code data-reactid="304">for</code><!-- react-text: 305 --> macro, unless wrapped
       in <!-- /react-text --><code data-reactid="306">doall</code><!-- react-text: 307 --> (just like in Reagent components). <!-- /react-text --></p><h2 data-reactid="308">track!</h2><p data-reactid="309"><code data-reactid="310">track!</code><!-- react-text: 311 --> is another new function. It works just
       like <!-- /react-text --><code data-reactid="312">track</code><!-- react-text: 313 -->, except that the function passed is
       invoked immediately, and continues to be invoked whenever any
       atoms used within it changes.<!-- /react-text --></p><p data-reactid="314">For example, given this function:</p><div data-reactid="315"><div class="demo-source clearfix" data-reactid="316"><h3 class="demo-heading" data-reactid="317">Source</h3><pre data-reactid="318"><span style="color:#272;" data-reactid="319">(</span><span style="color:#687868;font-weight:bold;" data-reactid="320">defn</span><!-- react-text: 321 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="322">log-app-state</span><!-- react-text: 323 --> <!-- /react-text --><span style="color:#940;" data-reactid="324">[</span><span style="color:#940;" data-reactid="325">]</span><!-- react-text: 326 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="327">(</span><!-- react-text: 328 -->prn @app-state<!-- /react-text --><span style="color:#940;" data-reactid="329">)</span><span style="color:#272;" data-reactid="330">)</span></pre></div></div><p data-reactid="331"><!-- react-text: 332 -->you could use <!-- /react-text --><code data-reactid="333">(defonce logger (r/track!
       log-app-state))</code><!-- react-text: 334 --> to monitor changes
       to <!-- /react-text --><code data-reactid="335">app-state</code><!-- react-text: 336 -->. <!-- /react-text --><code data-reactid="337">log-app-state</code><!-- react-text: 338 --> would
       continue to run until you stop it, using <!-- /react-text --><code data-reactid="339">(r/dispose!
       logger)</code><!-- react-text: 340 -->.<!-- /react-text --></p><h2 data-reactid="341">with-let: Handling destruction</h2><p data-reactid="342"><!-- react-text: 343 -->Reagent now has a new way of writing components that need
       to do something when they are no longer around:
       the <!-- /react-text --><code data-reactid="344">with-let</code><!-- react-text: 345 --> macro. It looks just
       like <!-- /react-text --><code data-reactid="346">let</code><!-- react-text: 347 --> – but the bindings only execute once,
       and it takes an optional <!-- /react-text --><code data-reactid="348">finally</code><!-- react-text: 349 --> clause, that
       runs when the component is no longer rendered.<!-- /react-text --></p><p data-reactid="350">For example: here&#x27;s a component that sets up an event
       listener for mouse moves, and stops listening when the
       component is removed.</p><div data-reactid="351"><div class="demo-example clearfix" data-reactid="352"><a class="demo-example-hide" data-reactid="353">hide</a><h3 class="demo-heading" data-reactid="354">Example </h3><div class="simple-demo" data-reactid="355"><div data-reactid="356"><!-- react-text: 357 -->Pointer moved to: <!-- /react-text --><!-- react-text: 358 --><!-- /react-text --></div></div></div><div class="demo-source clearfix" data-reactid="359"><h3 class="demo-heading" data-reactid="360">Source</h3><pre data-reactid="361"><span style="color:#272;" data-reactid="362">(</span><span style="color:#687868;font-weight:bold;" data-reactid="363">defn</span><!-- react-text: 364 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="365">mouse-pos-comp</span><!-- react-text: 366 --> <!-- /react-text --><span style="color:#940;" data-reactid="367">[</span><span style="color:#940;" data-reactid="368">]</span><!-- react-text: 369 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="370">(</span><span style="color:#687868;font-weight:bold;" data-reactid="371">r/with-let</span><!-- react-text: 372 --> <!-- /react-text --><span style="color:#44a;" data-reactid="373">[</span><!-- react-text: 374 -->pointer <!-- /react-text --><span style="color:#272;" data-reactid="375">(</span><span style="color:#687868;font-weight:bold;" data-reactid="376">r/atom</span><!-- react-text: 377 --> nil<!-- /react-text --><span style="color:#272;" data-reactid="378">)</span><!-- react-text: 379 -->
               handler #<!-- /react-text --><span style="color:#272;" data-reactid="380">(</span><span style="color:#687868;font-weight:bold;" data-reactid="381">swap!</span><!-- react-text: 382 --> pointer <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="383">assoc</span><!-- react-text: 384 -->
                               <!-- /react-text --><span style="color:blue;" data-reactid="385">:x</span><!-- react-text: 386 --> <!-- /react-text --><span style="color:#940;" data-reactid="387">(</span><!-- react-text: 388 -->.-pageX <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="389">%</span><span style="color:#940;" data-reactid="390">)</span><!-- react-text: 391 -->
                               <!-- /react-text --><span style="color:blue;" data-reactid="392">:y</span><!-- react-text: 393 --> <!-- /react-text --><span style="color:#940;" data-reactid="394">(</span><!-- react-text: 395 -->.-pageY <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="396">%</span><span style="color:#940;" data-reactid="397">)</span><span style="color:#272;" data-reactid="398">)</span><!-- react-text: 399 -->
               _ <!-- /react-text --><span style="color:#272;" data-reactid="400">(</span><!-- react-text: 401 -->.addEventListener <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="402">js/document</span><!-- react-text: 403 --> <!-- /react-text --><span style="color:green;" data-reactid="404">&quot;mousemove&quot;</span><!-- react-text: 405 --> handler<!-- /react-text --><span style="color:#272;" data-reactid="406">)</span><span style="color:#44a;" data-reactid="407">]</span><!-- react-text: 408 -->
    <!-- /react-text --><span style="color:#44a;" data-reactid="409">[</span><span style="color:blue;" data-reactid="410">:div</span><!-- react-text: 411 -->
     <!-- /react-text --><span style="color:green;" data-reactid="412">&quot;Pointer moved to: &quot;</span><!-- react-text: 413 -->
     <!-- /react-text --><span style="color:#272;" data-reactid="414">(</span><span style="color:#687868;font-weight:bold;" data-reactid="415">str</span><!-- react-text: 416 --> @pointer<!-- /react-text --><span style="color:#272;" data-reactid="417">)</span><span style="color:#44a;" data-reactid="418">]</span><!-- react-text: 419 -->
    <!-- /react-text --><span style="color:#44a;" data-reactid="420">(</span><span style="color:#687868;font-weight:bold;" data-reactid="421">finally</span><!-- react-text: 422 -->
      <!-- /react-text --><span style="color:#272;" data-reactid="423">(</span><!-- react-text: 424 -->.removeEventListener <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="425">js/document</span><!-- react-text: 426 --> <!-- /react-text --><span style="color:green;" data-reactid="427">&quot;mousemove&quot;</span><!-- react-text: 428 --> handler<!-- /react-text --><span style="color:#272;" data-reactid="429">)</span><span style="color:#44a;" data-reactid="430">)</span><span style="color:#940;" data-reactid="431">)</span><span style="color:#272;" data-reactid="432">)</span></pre></div></div><p data-reactid="433">The same thing could of course be achieved with React
       lifecycle methods, but that would be a lot more verbose.</p><p data-reactid="434"><code data-reactid="435">with-let</code><!-- react-text: 436 --> can also be combined
       with <!-- /react-text --><code data-reactid="437">track</code><!-- react-text: 438 --> (and other reactive contexts). For
       example, the component above could be written as: <!-- /react-text --></p><div data-reactid="439"><div class="demo-example clearfix" data-reactid="440"><a class="demo-example-hide" data-reactid="441">hide</a><h3 class="demo-heading" data-reactid="442">Example </h3><div class="simple-demo" data-reactid="443"><div data-reactid="444"><!-- react-text: 445 -->Pointer moved to: <!-- /react-text --><!-- react-text: 446 --><!-- /react-text --></div></div></div><div class="demo-source clearfix" data-reactid="447"><h3 class="demo-heading" data-reactid="448">Source</h3><pre data-reactid="449"><span style="color:#272;" data-reactid="450">(</span><span style="color:#687868;font-weight:bold;" data-reactid="451">defn</span><!-- react-text: 452 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="453">mouse-pos</span><!-- react-text: 454 --> <!-- /react-text --><span style="color:#940;" data-reactid="455">[</span><span style="color:#940;" data-reactid="456">]</span><!-- react-text: 457 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="458">(</span><span style="color:#687868;font-weight:bold;" data-reactid="459">r/with-let</span><!-- react-text: 460 --> <!-- /react-text --><span style="color:#44a;" data-reactid="461">[</span><!-- react-text: 462 -->pointer <!-- /react-text --><span style="color:#272;" data-reactid="463">(</span><span style="color:#687868;font-weight:bold;" data-reactid="464">r/atom</span><!-- react-text: 465 --> nil<!-- /react-text --><span style="color:#272;" data-reactid="466">)</span><!-- react-text: 467 -->
               handler #<!-- /react-text --><span style="color:#272;" data-reactid="468">(</span><span style="color:#687868;font-weight:bold;" data-reactid="469">swap!</span><!-- react-text: 470 --> pointer <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="471">assoc</span><!-- react-text: 472 -->
                               <!-- /react-text --><span style="color:blue;" data-reactid="473">:x</span><!-- react-text: 474 --> <!-- /react-text --><span style="color:#940;" data-reactid="475">(</span><!-- react-text: 476 -->.-pageX <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="477">%</span><span style="color:#940;" data-reactid="478">)</span><!-- react-text: 479 -->
                               <!-- /react-text --><span style="color:blue;" data-reactid="480">:y</span><!-- react-text: 481 --> <!-- /react-text --><span style="color:#940;" data-reactid="482">(</span><!-- react-text: 483 -->.-pageY <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="484">%</span><span style="color:#940;" data-reactid="485">)</span><span style="color:#272;" data-reactid="486">)</span><!-- react-text: 487 -->
               _ <!-- /react-text --><span style="color:#272;" data-reactid="488">(</span><!-- react-text: 489 -->.addEventListener <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="490">js/document</span><!-- react-text: 491 --> <!-- /react-text --><span style="color:green;" data-reactid="492">&quot;mousemove&quot;</span><!-- react-text: 493 --> handler<!-- /react-text --><span style="color:#272;" data-reactid="494">)</span><span style="color:#44a;" data-reactid="495">]</span><!-- react-text: 496 -->
    @pointer
    <!-- /react-text --><span style="color:#44a;" data-reactid="497">(</span><span style="color:#687868;font-weight:bold;" data-reactid="498">finally</span><!-- react-text: 499 -->
      <!-- /react-text --><span style="color:#272;" data-reactid="500">(</span><!-- react-text: 501 -->.removeEventListener <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="502">js/document</span><!-- react-text: 503 --> <!-- /react-text --><span style="color:green;" data-reactid="504">&quot;mousemove&quot;</span><!-- react-text: 505 --> handler<!-- /react-text --><span style="color:#272;" data-reactid="506">)</span><span style="color:#44a;" data-reactid="507">)</span><span style="color:#940;" data-reactid="508">)</span><span style="color:#272;" data-reactid="509">)</span><!-- react-text: 510 -->

<!-- /react-text --><span style="color:#272;" data-reactid="511">(</span><span style="color:#687868;font-weight:bold;" data-reactid="512">defn</span><!-- react-text: 513 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="514">tracked-pos</span><!-- react-text: 515 --> <!-- /react-text --><span style="color:#940;" data-reactid="516">[</span><span style="color:#940;" data-reactid="517">]</span><!-- react-text: 518 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="519">[</span><span style="color:blue;" data-reactid="520">:div</span><!-- react-text: 521 -->
   <!-- /react-text --><span style="color:green;" data-reactid="522">&quot;Pointer moved to: &quot;</span><!-- react-text: 523 -->
   <!-- /react-text --><span style="color:#44a;" data-reactid="524">(</span><span style="color:#687868;font-weight:bold;" data-reactid="525">str</span><!-- react-text: 526 --> @<!-- /react-text --><span style="color:#272;" data-reactid="527">(</span><span style="color:#687868;font-weight:bold;" data-reactid="528">r/track</span><!-- react-text: 529 --> mouse-pos<!-- /react-text --><span style="color:#272;" data-reactid="530">)</span><span style="color:#44a;" data-reactid="531">)</span><span style="color:#940;" data-reactid="532">]</span><span style="color:#272;" data-reactid="533">)</span></pre></div></div><p data-reactid="534"><!-- react-text: 535 -->The <!-- /react-text --><code data-reactid="536">finally</code><!-- react-text: 537 --> clause will run
       when <!-- /react-text --><code data-reactid="538">mouse-pos</code><!-- react-text: 539 --> is no longer tracked anywhere, i.e
       in this case when <!-- /react-text --><code data-reactid="540">tracked-pos</code><!-- react-text: 541 -->is unmounted.<!-- /react-text --></p><p data-reactid="542"><code data-reactid="543">with-let</code><!-- react-text: 544 --> can also generally be used instead of
       returning functions from components that keep local state, and
       may be a bit easier to read.<!-- /react-text --></p><section class="demo-text" data-reactid="545"><h2 data-reactid="546">Event handling with rswap!</h2><p data-reactid="547"><code data-reactid="548">rswap!</code><!-- react-text: 549 --> is another new function in 0.6.0. It
        works like standard <!-- /react-text --><code data-reactid="550">swap!</code><!-- react-text: 551 --> except that it<!-- /react-text --></p><ul data-reactid="552"><li data-reactid="553">always returns nil</li><li data-reactid="554"><!-- react-text: 555 -->allows recursive applications of <!-- /react-text --><code data-reactid="556">rswap!</code><!-- react-text: 557 --> on the same
         atom.<!-- /react-text --></li></ul><p data-reactid="558"><!-- react-text: 559 -->That makes <!-- /react-text --><code data-reactid="560">rswap!</code><!-- react-text: 561 --> especially suited for event
        handling.<!-- /react-text --></p><p data-reactid="562"><!-- react-text: 563 -->Here’s an example that uses event handling
        with <!-- /react-text --><code data-reactid="564">rswap!</code><!-- react-text: 565 --> to edit the data introduced in the
        section about <!-- /react-text --><code data-reactid="566">track</code><!-- react-text: 567 --> above:<!-- /react-text --></p><div data-reactid="568"><div class="demo-example clearfix" data-reactid="569"><a class="demo-example-hide" data-reactid="570">hide</a><h3 class="demo-heading" data-reactid="571">Example </h3><div class="simple-demo" data-reactid="572"><div data-reactid="573"><ul data-reactid="574"><li data-reactid="575">John Smith</li><li data-reactid="576">Maggie Johnson</li></ul><div data-reactid="577"><input value="John Smith" data-reactid="578"/></div><div data-reactid="579"><input value="Maggie Johnson" data-reactid="580"/></div><input type="button" value="Add person" data-reactid="581"/></div></div></div><div class="demo-source clearfix" data-reactid="582"><h3 class="demo-heading" data-reactid="583">Source</h3><pre data-reactid="584"><span style="color:#272;" data-reactid="585">(</span><span style="color:#687868;font-weight:bold;" data-reactid="586">defn</span><!-- react-text: 587 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="588">event-handler</span><!-- react-text: 589 --> <!-- /react-text --><span style="color:#940;" data-reactid="590">[</span><!-- react-text: 591 -->state <!-- /react-text --><span style="color:#44a;" data-reactid="592">[</span><!-- react-text: 593 -->event-name id value<!-- /react-text --><span style="color:#44a;" data-reactid="594">]</span><span style="color:#940;" data-reactid="595">]</span><!-- react-text: 596 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="597">(</span><span style="color:#687868;font-weight:bold;" data-reactid="598">case</span><!-- react-text: 599 --> event-name
    <!-- /react-text --><span style="color:blue;" data-reactid="600">:set-name</span><!-- react-text: 601 -->   <!-- /react-text --><span style="color:#44a;" data-reactid="602">(</span><span style="color:#687868;font-weight:bold;" data-reactid="603">assoc-in</span><!-- react-text: 604 --> state <!-- /react-text --><span style="color:#272;" data-reactid="605">[</span><span style="color:blue;" data-reactid="606">:people</span><!-- react-text: 607 --> id <!-- /react-text --><span style="color:blue;" data-reactid="608">:name</span><span style="color:#272;" data-reactid="609">]</span><!-- react-text: 610 -->
                          value<!-- /react-text --><span style="color:#44a;" data-reactid="611">)</span><!-- react-text: 612 -->
    <!-- /react-text --><span style="color:blue;" data-reactid="613">:add-person</span><!-- react-text: 614 --> <!-- /react-text --><span style="color:#44a;" data-reactid="615">(</span><span style="color:#687868;font-weight:bold;" data-reactid="616">let</span><!-- react-text: 617 --> <!-- /react-text --><span style="color:#272;" data-reactid="618">[</span><!-- react-text: 619 -->new-key <!-- /react-text --><span style="color:#940;" data-reactid="620">(</span><span style="color:#687868;font-weight:bold;" data-reactid="621">-&gt;&gt;</span><!-- react-text: 622 --> state <!-- /react-text --><span style="color:blue;" data-reactid="623">:people</span><!-- react-text: 624 --> keys <!-- /react-text --><span style="color:#44a;" data-reactid="625">(</span><!-- react-text: 626 -->apply max<!-- /react-text --><span style="color:#44a;" data-reactid="627">)</span><!-- react-text: 628 --> <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="629">inc</span><span style="color:#940;" data-reactid="630">)</span><span style="color:#272;" data-reactid="631">]</span><!-- react-text: 632 -->
                  <!-- /react-text --><span style="color:#272;" data-reactid="633">(</span><span style="color:#687868;font-weight:bold;" data-reactid="634">assoc-in</span><!-- react-text: 635 --> state <!-- /react-text --><span style="color:#940;" data-reactid="636">[</span><span style="color:blue;" data-reactid="637">:people</span><!-- react-text: 638 --> new-key<!-- /react-text --><span style="color:#940;" data-reactid="639">]</span><!-- react-text: 640 -->
                            <!-- /react-text --><span style="color:#940;" data-reactid="641">{</span><span style="color:blue;" data-reactid="642">:name</span><!-- react-text: 643 --> <!-- /react-text --><span style="color:green;" data-reactid="644">&quot;&quot;</span><span style="color:#940;" data-reactid="645">}</span><span style="color:#272;" data-reactid="646">)</span><span style="color:#44a;" data-reactid="647">)</span><!-- react-text: 648 -->
    state<!-- /react-text --><span style="color:#940;" data-reactid="649">)</span><span style="color:#272;" data-reactid="650">)</span><!-- react-text: 651 -->

<!-- /react-text --><span style="color:#272;" data-reactid="652">(</span><span style="color:#687868;font-weight:bold;" data-reactid="653">defn</span><!-- react-text: 654 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="655">emit</span><!-- react-text: 656 --> <!-- /react-text --><span style="color:#940;" data-reactid="657">[</span><!-- react-text: 658 -->e<!-- /react-text --><span style="color:#940;" data-reactid="659">]</span><!-- react-text: 660 -->
  <!-- /react-text --><span style="color:gray;font-style:italic;" data-reactid="661">;; (js/console.log &quot;Handling event&quot; (str e))</span><!-- react-text: 662 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="663">(</span><span style="color:#687868;font-weight:bold;" data-reactid="664">r/rswap!</span><!-- react-text: 665 --> app-state event-handler e<!-- /react-text --><span style="color:#940;" data-reactid="666">)</span><span style="color:#272;" data-reactid="667">)</span><!-- react-text: 668 -->

<!-- /react-text --><span style="color:#272;" data-reactid="669">(</span><span style="color:#687868;font-weight:bold;" data-reactid="670">defn</span><!-- react-text: 671 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="672">name-edit</span><!-- react-text: 673 --> <!-- /react-text --><span style="color:#940;" data-reactid="674">[</span><!-- react-text: 675 -->id<!-- /react-text --><span style="color:#940;" data-reactid="676">]</span><!-- react-text: 677 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="678">(</span><span style="color:#687868;font-weight:bold;" data-reactid="679">let</span><!-- react-text: 680 --> <!-- /react-text --><span style="color:#44a;" data-reactid="681">[</span><!-- react-text: 682 -->p @<!-- /react-text --><span style="color:#272;" data-reactid="683">(</span><span style="color:#687868;font-weight:bold;" data-reactid="684">r/track</span><!-- react-text: 685 --> person id<!-- /react-text --><span style="color:#272;" data-reactid="686">)</span><span style="color:#44a;" data-reactid="687">]</span><!-- react-text: 688 -->
    <!-- /react-text --><span style="color:#44a;" data-reactid="689">[</span><span style="color:blue;" data-reactid="690">:div</span><!-- react-text: 691 -->
     <!-- /react-text --><span style="color:#272;" data-reactid="692">[</span><span style="color:blue;" data-reactid="693">:input</span><!-- react-text: 694 --> <!-- /react-text --><span style="color:#940;" data-reactid="695">{</span><span style="color:blue;" data-reactid="696">:value</span><!-- react-text: 697 --> <!-- /react-text --><span style="color:#44a;" data-reactid="698">(</span><span style="color:blue;" data-reactid="699">:name</span><!-- react-text: 700 --> p<!-- /react-text --><span style="color:#44a;" data-reactid="701">)</span><!-- react-text: 702 -->
              <!-- /react-text --><span style="color:blue;" data-reactid="703">:on-change</span><!-- react-text: 704 --> #<!-- /react-text --><span style="color:#44a;" data-reactid="705">(</span><!-- react-text: 706 -->emit <!-- /react-text --><span style="color:#272;" data-reactid="707">[</span><span style="color:blue;" data-reactid="708">:set-name</span><!-- react-text: 709 --> id <!-- /react-text --><span style="color:#940;" data-reactid="710">(</span><!-- react-text: 711 -->.-target.value <!-- /react-text --><span style="color:#687868;font-weight:bold;" data-reactid="712">%</span><span style="color:#940;" data-reactid="713">)</span><span style="color:#272;" data-reactid="714">]</span><span style="color:#44a;" data-reactid="715">)</span><span style="color:#940;" data-reactid="716">}</span><span style="color:#272;" data-reactid="717">]</span><span style="color:#44a;" data-reactid="718">]</span><span style="color:#940;" data-reactid="719">)</span><span style="color:#272;" data-reactid="720">)</span><!-- react-text: 721 -->

<!-- /react-text --><span style="color:#272;" data-reactid="722">(</span><span style="color:#687868;font-weight:bold;" data-reactid="723">defn</span><!-- react-text: 724 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="725">edit-fields</span><!-- react-text: 726 --> <!-- /react-text --><span style="color:#940;" data-reactid="727">[</span><span style="color:#940;" data-reactid="728">]</span><!-- react-text: 729 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="730">(</span><span style="color:#687868;font-weight:bold;" data-reactid="731">let</span><!-- react-text: 732 --> <!-- /react-text --><span style="color:#44a;" data-reactid="733">[</span><!-- react-text: 734 -->ids @<!-- /react-text --><span style="color:#272;" data-reactid="735">(</span><span style="color:#687868;font-weight:bold;" data-reactid="736">r/track</span><!-- react-text: 737 --> person-keys<!-- /react-text --><span style="color:#272;" data-reactid="738">)</span><span style="color:#44a;" data-reactid="739">]</span><!-- react-text: 740 -->
    <!-- /react-text --><span style="color:#44a;" data-reactid="741">[</span><span style="color:blue;" data-reactid="742">:div</span><!-- react-text: 743 -->
     <!-- /react-text --><span style="color:#272;" data-reactid="744">[</span><!-- react-text: 745 -->name-list<!-- /react-text --><span style="color:#272;" data-reactid="746">]</span><!-- react-text: 747 -->
     <!-- /react-text --><span style="color:#272;" data-reactid="748">(</span><span style="color:#687868;font-weight:bold;" data-reactid="749">for</span><!-- react-text: 750 --> <!-- /react-text --><span style="color:#940;" data-reactid="751">[</span><!-- react-text: 752 -->i ids<!-- /react-text --><span style="color:#940;" data-reactid="753">]</span><!-- react-text: 754 -->
       ^<!-- /react-text --><span style="color:#940;" data-reactid="755">{</span><span style="color:blue;" data-reactid="756">:key</span><!-- react-text: 757 --> i<!-- /react-text --><span style="color:#940;" data-reactid="758">}</span><!-- react-text: 759 --> <!-- /react-text --><span style="color:#940;" data-reactid="760">[</span><!-- react-text: 761 -->name-edit i<!-- /react-text --><span style="color:#940;" data-reactid="762">]</span><span style="color:#272;" data-reactid="763">)</span><!-- react-text: 764 -->
     <!-- /react-text --><span style="color:#272;" data-reactid="765">[</span><span style="color:blue;" data-reactid="766">:input</span><!-- react-text: 767 --> <!-- /react-text --><span style="color:#940;" data-reactid="768">{</span><span style="color:blue;" data-reactid="769">:type</span><!-- react-text: 770 --> &#x27;button
              <!-- /react-text --><span style="color:blue;" data-reactid="771">:value</span><!-- react-text: 772 --> <!-- /react-text --><span style="color:green;" data-reactid="773">&quot;Add person&quot;</span><!-- react-text: 774 -->
              <!-- /react-text --><span style="color:blue;" data-reactid="775">:on-click</span><!-- react-text: 776 --> #<!-- /react-text --><span style="color:#44a;" data-reactid="777">(</span><!-- react-text: 778 -->emit <!-- /react-text --><span style="color:#272;" data-reactid="779">[</span><span style="color:blue;" data-reactid="780">:add-person</span><span style="color:#272;" data-reactid="781">]</span><span style="color:#44a;" data-reactid="782">)</span><span style="color:#940;" data-reactid="783">}</span><span style="color:#272;" data-reactid="784">]</span><span style="color:#44a;" data-reactid="785">]</span><span style="color:#940;" data-reactid="786">)</span><span style="color:#272;" data-reactid="787">)</span></pre></div></div><p data-reactid="788"><!-- react-text: 789 -->All events are passed through the <!-- /react-text --><code data-reactid="790">emit</code><!-- react-text: 791 -->
        function, consisting of a trivial application
        of <!-- /react-text --><code data-reactid="792">rswap!</code><!-- react-text: 793 --> and some optional logging. This is the
        only place where application state actually changes – the rest
        is pure functions.<!-- /react-text --></p><p data-reactid="794"><!-- react-text: 795 -->The actual event handling is done
        in <!-- /react-text --><code data-reactid="796">event-handler</code><!-- react-text: 797 -->, which takes state and event as
        parameters, and returns a new state (events are represented by
        vectors here, with an event name in the first position).<!-- /react-text --></p><p data-reactid="798"><!-- react-text: 799 -->All the UI components have to do is then just to return
        some markup, and set up routing of events through the <!-- /react-text --><code data-reactid="800">emit</code><!-- react-text: 801 -->
        function. <!-- /react-text --></p><p data-reactid="802">This architecture basically divides the application into
        two logical functions: </p><ul data-reactid="803"><li data-reactid="804">The first takes state and an event as input, and returns
         the next state.</li><li data-reactid="805">The other takes state as input, and returns a UI
         definition.</li></ul><p data-reactid="806"><!-- react-text: 807 -->This simple application could probably just as well use
        the common <!-- /react-text --><code data-reactid="808">swap!</code><!-- react-text: 809 --> instead of <!-- /react-text --><code data-reactid="810">rswap!</code><!-- react-text: 811 -->,
        but using <!-- /react-text --><code data-reactid="812">swap!</code><!-- react-text: 813 --> in React’s event handlers may
        trigger warnings due to unexpected return values, and may
        cause severe headaches if an event handler called by <!-- /react-text --><code data-reactid="814">emit</code><!-- react-text: 815 -->
        itself emits a new event (that would result in lost
        events, and much confusion).<!-- /react-text --></p><p data-reactid="816"><!-- react-text: 817 -->For a more structured version of a similar approach, see
        the excellent <!-- /react-text --><a href="https://github.com/Day8/re-frame" data-reactid="818">re-frame</a><!-- react-text: 819 -->
        framework.<!-- /react-text --></p></section><section class="demo-text" data-reactid="820"><h2 data-reactid="821">New React version and new namespaces</h2><p data-reactid="822">Reagent now depends on React version 0.14.3. React itself
        is now split into three parts, with separate packages for
        browser specific code, and HTML generation respectively.</p><p data-reactid="823"><!-- react-text: 824 -->To reflect that, two new namespaces have been introduced
        in Reagent as well: <!-- /react-text --><code data-reactid="825">reagent.dom</code><!-- react-text: 826 -->
        and <!-- /react-text --><code data-reactid="827">reagent.dom.server</code><!-- react-text: 828 -->. They contain functions
        that used to be in <!-- /react-text --><code data-reactid="829">reagent.core</code><!-- react-text: 830 -->. <!-- /react-text --></p><p data-reactid="831"><code data-reactid="832">reagent.dom</code><!-- react-text: 833 --> contains: <!-- /react-text --></p><ul data-reactid="834"><li data-reactid="835"><code data-reactid="836">render</code></li><li data-reactid="837"><code data-reactid="838">unmount-component-at-node</code></li><li data-reactid="839"><code data-reactid="840">dom-node</code></li><li data-reactid="841"><code data-reactid="842">force-update-all</code></li></ul><p data-reactid="843"><code data-reactid="844">reagent.dom.server</code><!-- react-text: 845 --> contains: <!-- /react-text --></p><ul data-reactid="846"><li data-reactid="847"><code data-reactid="848">render-to-string</code></li><li data-reactid="849"><code data-reactid="850">render-to-static-markup</code></li></ul><p data-reactid="851"><!-- react-text: 852 -->These functions are still available
        in <!-- /react-text --><code data-reactid="853">reagent.core</code><!-- react-text: 854 --> in this release (for backward
        compatibility reasons), but they may be deprecated in the
        future.<!-- /react-text --></p><p data-reactid="855"><!-- react-text: 856 -->The changes in React also mean that if you specify the
        React version to use in your project.clj,
        with <!-- /react-text --><code data-reactid="857">cljsjs/react</code><!-- react-text: 858 --> in the <!-- /react-text --><code data-reactid="859">:dependencies</code><!-- react-text: 860 -->
        section, you now have to specify <!-- /react-text --><code data-reactid="861">cljsjs/react-dom</code><!-- react-text: 862 -->
        and <!-- /react-text --><code data-reactid="863">cljsjs/react-dom-server</code><!-- react-text: 864 --> instead.<!-- /react-text --></p></section><section class="demo-text" data-reactid="865"><h2 data-reactid="866">Better interop with native React</h2><p data-reactid="867"><!-- react-text: 868 -->The output of <!-- /react-text --><code data-reactid="869">create-class</code><!-- react-text: 870 --> can now be used
        directly in JSX.<!-- /react-text --></p><p data-reactid="871"><!-- react-text: 872 -->”Native React components” can now be used directly in
        Reagent’s hiccup forms, using this syntax: <!-- /react-text --><code data-reactid="873">[:&gt;
        nativeComp {:key &quot;value&quot;}]</code><!-- react-text: 874 -->. This might sometimes be more
        convenient than using <!-- /react-text --><code data-reactid="875">adapt-react-class</code><!-- react-text: 876 -->. <!-- /react-text --></p><p data-reactid="877"><!-- react-text: 878 -->Reagent should now also be a bit easier to use in
        node.js. If global React is not
        defined (i.e <!-- /react-text --><code data-reactid="879">React</code><!-- react-text: 880 -->, <!-- /react-text --><code data-reactid="881">ReactDOM</code><!-- react-text: 882 -->
        and <!-- /react-text --><code data-reactid="883">ReactDOMServer</code><!-- react-text: 884 -->), Reagent tries to
        use <!-- /react-text --><code data-reactid="885">require</code><!-- react-text: 886 --> instead, to get react, react-dom and
        react-dom/server from npm.<!-- /react-text --></p></section><section class="demo-text" data-reactid="887"><h2 data-reactid="888">Better cursor</h2><p data-reactid="889"><!-- react-text: 890 -->Cursors are now cached, which should make them a bit
        easier to use. Previously, every instance
        of <!-- /react-text --><code data-reactid="891">cursor</code><!-- react-text: 892 --> had its own state.
        Now <!-- /react-text --><code data-reactid="893">cursor</code><!-- react-text: 894 -->s called with the same arguments share
        data, which means that components like this now make sense: <!-- /react-text --></p><div data-reactid="895"><div class="demo-example clearfix" data-reactid="896"><a class="demo-example-hide" data-reactid="897">hide</a><h3 class="demo-heading" data-reactid="898">Example </h3><div class="simple-demo" data-reactid="899"><p data-reactid="900"><!-- react-text: 901 -->A person: <!-- /react-text --><!-- react-text: 902 -->John Smith<!-- /react-text --></p></div></div><div class="demo-source clearfix" data-reactid="903"><h3 class="demo-heading" data-reactid="904">Source</h3><pre data-reactid="905"><span style="color:#272;" data-reactid="906">(</span><span style="color:#687868;font-weight:bold;" data-reactid="907">defn</span><!-- react-text: 908 --> <!-- /react-text --><span style="color:#5050c0;font-weight:bold;" data-reactid="909">cursor-example</span><!-- react-text: 910 --> <!-- /react-text --><span style="color:#940;" data-reactid="911">[</span><span style="color:#940;" data-reactid="912">]</span><!-- react-text: 913 -->
  <!-- /react-text --><span style="color:#940;" data-reactid="914">(</span><span style="color:#687868;font-weight:bold;" data-reactid="915">let</span><!-- react-text: 916 --> <!-- /react-text --><span style="color:#44a;" data-reactid="917">[</span><!-- react-text: 918 -->first-person <!-- /react-text --><span style="color:#272;" data-reactid="919">(</span><span style="color:#687868;font-weight:bold;" data-reactid="920">r/cursor</span><!-- react-text: 921 --> app-state <!-- /react-text --><span style="color:#940;" data-reactid="922">[</span><span style="color:blue;" data-reactid="923">:people</span><!-- react-text: 924 --> 1<!-- /react-text --><span style="color:#940;" data-reactid="925">]</span><span style="color:#272;" data-reactid="926">)</span><span style="color:#44a;" data-reactid="927">]</span><!-- react-text: 928 -->
    <!-- /react-text --><span style="color:#44a;" data-reactid="929">[</span><span style="color:blue;" data-reactid="930">:p</span><!-- react-text: 931 --> <!-- /react-text --><span style="color:green;" data-reactid="932">&quot;A person: &quot;</span><!-- react-text: 933 --> <!-- /react-text --><span style="color:#272;" data-reactid="934">(</span><span style="color:blue;" data-reactid="935">:name</span><!-- react-text: 936 --> @first-person<!-- /react-text --><span style="color:#272;" data-reactid="937">)</span><span style="color:#44a;" data-reactid="938">]</span><span style="color:#940;" data-reactid="939">)</span><span style="color:#272;" data-reactid="940">)</span></pre></div></div><p data-reactid="941">Previously cursors were really only useful (in the sense
        that unnecessary re-renderings were avoided) when passed as
        arguments to child components.</p></section><section class="demo-text" data-reactid="942"><h2 data-reactid="943">Tapping into the rendering loop</h2><p data-reactid="944"><!-- react-text: 945 -->The <!-- /react-text --><code data-reactid="946">next-tick</code><!-- react-text: 947 --> function now has a more
        predictable timing. The function passed
        to <!-- /react-text --><code data-reactid="948">next-tick</code><!-- react-text: 949 --> is now invoked immediately before the
        next rendering (which is in turn triggered
        using <!-- /react-text --><code data-reactid="950">requestAnimationFrame</code><!-- react-text: 951 -->).<!-- /react-text --></p><p data-reactid="952"><code data-reactid="953">after-update</code><!-- react-text: 954 --> works just
        like <!-- /react-text --><code data-reactid="955">next-tick</code><!-- react-text: 956 -->, except that the function given is
        invoked immediately <!-- /react-text --><b data-reactid="957">after</b><!-- react-text: 958 --> the next rendering.<!-- /react-text --></p></section></div></div></div><a href="https://github.com/reagent-project/reagent" class="github-badge" data-reactid="959"><img style="position:absolute;top:0;left:0;border:0;" alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png" data-reactid="960"/></a></div></div></div><script>var pageConfig = {"page-path":"/news/news060-alpha.html"}</script><script src="js/main.js?1462189147629" type="text/javascript"></script></body></html>